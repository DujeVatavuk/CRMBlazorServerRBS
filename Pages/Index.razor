@page "/"

@attribute [Authorize]
<PageTitle>Index</PageTitle>
<RadzenRow Gap="5" RowGap="5">
    <RadzenColumn SizeXL="3" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenRow>
                <RadzenColumn SizeXS="4">
                    <RadzenIcon Icon="attach_money" Style="width: 64px; height: 64px; font-size: 48px"></RadzenIcon>
                </RadzenColumn>
<RadzenColumn SizeXS="8">
    <RadzenHeading Text="Revenue" Size="H4" Style="margin: 0px; text-align: right"></RadzenHeading>
<RadzenHeading Text="LAST MONTH" Size="H4" Style="margin: 0px; text-align: right; font-size: 12px"></RadzenHeading>
<RadzenHeading Text="@monthlyStats.Revenue.ToString("C")" Size="H4" Style="margin: 0px; text-align: right; font-size: 24px; margin-top: 13px"></RadzenHeading>
</RadzenColumn>
            </RadzenRow>
        </RadzenCard>
    </RadzenColumn>
<RadzenColumn SizeXL="3" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenRow>
                <RadzenColumn SizeXS="4">
                    <RadzenIcon Icon="shopping_cart" Style="width: 64px; height: 64px; font-size: 48px"></RadzenIcon>
                </RadzenColumn>
<RadzenColumn SizeXS="8">
    <RadzenHeading Text="Opportunities" Size="H4" Style="margin: 0px; text-align: right"></RadzenHeading>
<RadzenHeading Text="LAST MONTH" Size="H4" Style="margin: 0px; text-align: right; font-size: 12px"></RadzenHeading>
<RadzenHeading Text="@(monthlyStats?.Opportunities.ToString("C"))" Size="H4" Style="margin: 0px; text-align: right; font-size: 24px; margin-top: 13px"></RadzenHeading>
</RadzenColumn>
            </RadzenRow>
        </RadzenCard>
    </RadzenColumn>
<RadzenColumn SizeXL="3" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenRow>
                <RadzenColumn SizeXS="4">
                    <RadzenIcon Icon="account_balance_wallet" Style="width: 64px; height: 64px; font-size: 48px"></RadzenIcon>
                </RadzenColumn>
<RadzenColumn SizeXS="8">
    <RadzenHeading Text="Average Deal Size" Size="H4" Style="margin: 0px; text-align: right"></RadzenHeading>
<RadzenHeading Text="LAST MONTH" Size="H4" Style="margin: 0px; text-align: right; font-size: 12px"></RadzenHeading>
<RadzenHeading Text="@(monthlyStats?.AverageDealSize.ToString("C"))" Size="H4" Style="margin: 0px; text-align: right; font-size: 24px; margin-top: 13px"></RadzenHeading>
</RadzenColumn>
            </RadzenRow>
        </RadzenCard>
    </RadzenColumn>
<RadzenColumn SizeXL="3" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenRow>
                <RadzenColumn SizeXS="4">
                    <RadzenIcon Icon="thumb_up" Style="width: 64px; height: 64px; font-size: 48px"></RadzenIcon>
                </RadzenColumn>
<RadzenColumn SizeXS="8">
    <RadzenHeading Text="Win Rate" Size="H4" Style="margin: 0px; text-align: right"></RadzenHeading>
<RadzenHeading Text="LAST MONTH" Size="H4" Style="margin: 0px; text-align: right; font-size: 12px"></RadzenHeading>
<RadzenHeading Text="@(monthlyStats?.Ratio.ToString("P"))" Size="H4" Style="margin: 0px; text-align: right; font-size: 24px; margin-top: 13px"></RadzenHeading>
</RadzenColumn>
            </RadzenRow>
        </RadzenCard>
    </RadzenColumn>
</RadzenRow>
<RadzenRow>
    <RadzenColumn SizeXL="4" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenHeading Text="Customer life time value"></RadzenHeading>
            <RadzenChart Style="width: 100%">
                <RadzenColumnSeries TItem="global::RevenueByCompany" Data="@revenueByCompany" ValueProperty="Revenue" CategoryProperty="Company"></RadzenColumnSeries>
            </RadzenChart>
        </RadzenCard>
    </RadzenColumn>
<RadzenColumn SizeXL="4" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenHeading Text="Revenue"></RadzenHeading>
            <RadzenChart Style="width: 100%">
                <RadzenColumnSeries TItem="global::RevenueByMonth" Data="@revenueByMonth" ValueProperty="Revenue" CategoryProperty="Month"></RadzenColumnSeries>
            </RadzenChart>
        </RadzenCard>
    </RadzenColumn>
<RadzenColumn SizeXL="4" SizeLG="6">
        <RadzenCard Style="margin: 16px">
            <RadzenHeading Text="Revenue by employee"></RadzenHeading>
            <RadzenChart Style="width: 100%">
                <RadzenColumnSeries TItem="global::RevenueByEmployee" Data="@revenueByEmployee" ValueProperty="Revenue" CategoryProperty="Employee"></RadzenColumnSeries>
            </RadzenChart>
        </RadzenCard>
    </RadzenColumn>
</RadzenRow>


@code {
    Stats monthlyStats { get; set; }
    IEnumerable<global::RevenueByCompany> revenueByCompany { get; set; }
    IEnumerable<global::RevenueByMonth> revenueByMonth { get; set; }
    IEnumerable<global::RevenueByEmployee> revenueByEmployee { get; set; }
    protected override void OnInitialized()
    {
        monthlyStats = MonthlyStats();
        revenueByCompany = RevenueByCompany();
        revenueByMonth = RevenueByMonth();
        revenueByEmployee = RevenueByEmployee();
    }
}